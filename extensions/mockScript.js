(()=>{"use strict";const e=window.XMLHttpRequest,t=()=>{const e={};return["apis","openMock"].forEach((t=>{e[t]=(e=>{try{return JSON.parse(e)}catch(t){return e}})(window.sessionStorage.getItem(`api_interceptor__${t}`))})),e};class s{constructor(){const t=new e;for(let e in t)"onreadystatechange"!==e?"onload"!==e?"function"!=typeof t[e]?["responseText","response"].includes(e)?Object.defineProperty(this,e,{get:()=>null==this[`_${e}`]?t[e]:this[`_${e}`],set:t=>this[`_${e}`]=t,enumerable:!0}):Object.defineProperty(this,e,{get:()=>t[e],set:s=>t[e]=s,enumerable:!0}):this[e]=t[e].bind(t):t.onload=(...e)=>{this.modifilyResponse(),this.onload&&this.onload.apply(this,e)}:t.onreadystatechange=(...e)=>{4==this.readyState&&this.modifilyResponse(),this.onreadystatechange&&this.onreadystatechange.apply(this,e)}}modifilyResponse(){const{apis:e,openMock:s}=t();let n=!1;e.forEach((e=>{if(!0===e.disabled)return;if(!0===n)return;const{schema:t}=e,{paths:s}=t,o=s.find((e=>this.responseURL.indexOf(e.uri)>-1));o&&(n=!0,this.responseText=o.response,this.response=o.response)}))}}new s,window.addEventListener("toPage",(n=>{const{apis:o,openMock:i}=t();(t=>{if(t)return console.log("开启"),void(window.XMLHttpRequest=s);console.log("禁用"),window.XMLHttpRequest=e})(i)}))})();