(function(e){function t(t){for(var r,a,i=t[0],u=t[1],l=t[2],d=0,f=[];d<i.length;d++)a=i[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&f.push(o[a][0]),o[a]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);s&&s(t);while(f.length)f.shift()();return c.push.apply(c,l||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,i=1;i<n.length;i++){var u=n[i];0!==o[u]&&(r=!1)}r&&(c.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={app:0},c=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="../panel/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"1ea2":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),o=n("1da1"),c=n("5530"),a=(n("96cf"),n("a434"),n("b0c0"),n("7b31")),i=n("6b59"),u=n("15fd"),l=(n("e9c4"),n("ac1f"),n("5319"),n("d3b7"),n("25f0"),n("99af"),n("7db0"),n("c740"),n("d81d"),n("d9e2"),n("be92")),s=n("ade3"),d=(n("159b"),n("b64b"),{toContent:"toContent",toBackGround:"toBackGround",toPanel:"toPanel",toPage:"toPage"}),f={refresh:"refresh"},b="api_interceptor__",p=function(e){try{return JSON.parse(e)}catch(t){return e}},O=!0,h={runtime:{sendMessage:function(e,t){console.log("sendMessage",e)},onMessage:{addListener:function(){console.log("addListener")}}},storage:{local:{get:function(e,t){console.log("local get",e);var n={};e.forEach((function(e){n[e]=B(window.sessionStorage.getItem("".concat(b).concat(e)))})),console.log("source",n),t(n)},set:function(e){Object.keys(e).forEach((function(t){window.sessionStorage.setItem("".concat(b).concat(t),R(e[t]))}))}}}},j=O?chrome:h,m=function(e,t){j.runtime.sendMessage({type:d.toContent,result:e},t)},v=function(e){j.runtime.onMessage.addListener((function(t,n,r){e(t,n,r)}))},w=function(e,t){if(O){var n=e.map((function(e){return"".concat(b).concat(e)}));return j.storage.local.get(n,(function(n){var r={};e.forEach((function(e){var t=n["".concat(b).concat(e)];t&&(r[e]=B(t))})),console.log("get",e,n,r),t(r)}))}return j.storage.local.get(e,t)},x=function(e){return O&&Object.keys(e).forEach((function(t){var n=Object(s["a"])({},"".concat(b).concat(t),R(e[t]));return console.log("set",n),j.storage.local.set(n)})),j.storage.local.set(e)},V=(n("caad"),n("2410")),g={Kepler:"Kepler",Owner:"Owner",All:"All"},C=function(e){try{return B(e)}catch(t){return new Error("schema 格式不对",e)}},N=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=C(e);if("string"===typeof n)return new Error("格式错误");if(!t){if(!n.hasOwnProperty("info"))return new Error("缺少info.title");if(!n.info.title)return new Error("缺少info.title")}if(!n.paths)return new Error("缺少paths");if(!Array.isArray(n.paths))return new Error("必须为数组");for(var r in n.paths){if(!n.paths[r].hasOwnProperty("desc"))return new Error("缺少array[i].desc");if(!n.paths[r].hasOwnProperty("uri"))return new Error("缺少array[i].uri");if(!n.paths[r].hasOwnProperty("methods"))return new Error("缺少array[i].methods");if(!n.paths[r].hasOwnProperty("code"))return new Error("缺少array[i].code");if(!n.paths[r].hasOwnProperty("response"))return new Error("缺少array[i].response")}},y=function(e){var t=C(e);if(t.message)return new Error("");if(!t.schema)return new Error("缺少schema.schema");if(!Array.isArray(t.schema))return new Error("schema.schema 必须为array");for(var n in t.schema){var r=N(t.schema[n].schema);if(!0!==r)return r}},k=function(e){var t=C(e);if(t.message)return new Error(t.message);if(!t.info)return new Error("缺少schema.info");if(!t.info.title)return new Error("缺少schema.info.title");if(!t.paths)return new Error("缺少schema.paths");for(var n in t.paths){var r=t.paths[n];if(0===Object.keys(r).length)return new Error("schema.paths ".concat(n," 缺少get、post、delete、put中任意一种方法"));for(var o in r){var c=["get","post","delete","put"].includes(o);if(!c)return new Error("schema.paths ".concat(n," 缺少get、post、delete、put中任意一种方法"))}}},_=function(e,t){var n=e.schema,r=e.name,o=n.paths,a={label:r,id:t,children:o.map((function(e){return{label:e.desc,detail:Object(c["a"])(Object(c["a"])({},e),{},{apisIdx:t})}}))};return a},E=function(e){var t=e.paths,n=e.info,r=n.title,o=[];return Object.keys(t).forEach((function(e){var n=t[e];Object.keys(n).forEach((function(t,r){var c=n[t];o.push({desc:c.summary,uri:e,methods:t,disabled:!0,finish:!1,id:U(),code:200,response:{}})}))})),{info:{title:r},paths:o}},T=function(e,t){var n=e.paths,r=t.paths,o=V(n);return r.forEach((function(e){var t=o.findIndex((function(t){return t.id===e.id}));if(-1!==t){o[t].desc=e.desc;var n=o[t].response;o[t].response=Object(c["a"])(Object(c["a"])({},n),e.response)}else o.push(e)})),{info:{title:t.info.title},paths:o}},M=n("5a0c"),S=n.n(M),I=["moduleIdx"],B=function(e){try{return JSON.parse(e)}catch(t){return e}},R=function(e){return JSON.stringify(e)},U=function(){var e="xxxxxxxx-xxxx-xxxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)}));return e},L="apis",z="YYYY-MM-DD hh:mm",A=Object(l["b"])(L,{state:function(){return{apis:[],openMock:!1}},actions:{addNewNode:function(e){var t=e.moduleIdx,n=Object(u["a"])(e,I),r=this.apis[t];r&&(r.schema.paths.push(Object(c["a"])({id:U()},n)),this.saveLocal())},changeGlobalMock:function(e){this.openMock=e,this.saveLocal()},init:function(){var e=this,t=["apis","openMock"];console.log("初始化state:",t),w(t,(function(n){console.log("getStore",n),t.forEach((function(t){var r=n[t];void 0!==r&&null!==r&&(e[t]=r)}))}))},saveLocal:function(){console.log("保存到local ",this.apis,this.openMock),x({apis:this.apis,openMock:this.openMock}),m({apis:this.apis,action:f.refresh,openMock:this.openMock},(function(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];(e=console).log.apply(e,["sendMessage"].concat(n))}))},add:function(e){var t=e.name;this.apis.find((function(e){return e.name===t}))?Object(a["a"])({type:"warn",message:"【".concat(t,"】已存在")}):(this.apis.push({id:U(),disabled:!0,name:e.name,schema:e.schema,create:S()(new Date).format(z),update:S()(new Date).format(z)}),this.saveLocal())},remove:function(e){var t=this.apis.findIndex((function(t){return t.id===e}));this.apis.splice(t,1),this.saveLocal()},removeItem:function(e,t){var n=this.apis[e];if(n){var r=n.schema.paths.findIndex((function(e){return e.id===t}));n.schema.paths.splice(r,1),this.saveLocal()}},edit:function(e){var t=e.id,n=this.apis.find((function(e){return e.id===t}));n?(n.name=e.name,n.disabled=e.disabled,n.update=S()(new Date).format(z),n.schema=e.merge?T(n.schema,e.schema):e.schema,this.saveLocal()):Object(a["a"])({type:"danger",message:"找不到【".concat(name,"】")})},editAll:function(e){this.apis=e.map((function(e,t){return{id:e.id?e.id:U(),name:e.name,disabled:!e.disabled||e.disabled,create:e.create?e.create:S()(new Date).format(z),update:e.update?itemupdate:S()(new Date).format(z),schema:{info:{title:e.schema.info.title},paths:e.schema.paths.map((function(e,n){return{apisIdx:t,id:e.id?e.id:U(),uri:e.uri,desc:e.desc,methods:e.methods?e.methods:"get",response:e.response?e.response:{},finish:!!e.finish&&e.finish,disabled:!e.disabled||e.disabled}}))}}})),this.saveLocal()},editItem:function(e){var t=e.apisIdx,n=this.apis[t];if(n){console.log(n);var r=e.uri,o=e.methods,c=e.id;try{var i=n["schema"]["paths"],u=i.findIndex((function(e){return e.id===c}));if(console.log(u),-1===u)throw Error("找不到",r,o);i[u]=e,console.log("formValue",e),this.saveLocal()}catch(l){console.log(n,e),Object(a["a"])({type:"warn",message:"修改数据失败".concat(l.message)})}}}}}),P=A,q=n("53ca"),D=(n("3ca3"),n("ddb0"),n("2b3d"),n("9861"),n("a15b"),function(e,t){if(e){t||(t="json.json"),"object"===Object(q["a"])(e)&&(e=JSON.stringify(e,void 0,4));var n=new Blob([e],{type:"text/json"}),r=document.createEvent("MouseEvents"),o=document.createElement("a");o.download=t,o.href=window.URL.createObjectURL(n),o.dataset.downloadurl=["text/json",o.download,o.href].join(":"),r.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),o.dispatchEvent(r)}else alert("保存的数据为空")}),J=n("61f0"),$=n.n(J),K={class:"com-json-edit",ref:"$jsonEdit"},G={props:{value:Object,refresh:Boolean},emits:["update:value","change"],setup:function(e,t){var n=t.emit,o=e,c=Object(r["getCurrentInstance"])(),a=Object(r["ref"])({});return Object(r["watch"])((function(){return o.refresh}),(function(){a.value.set(B(o.value))})),Object(r["onMounted"])((function(){var e=c.refs["$jsonEdit"];a.value=new $.a(e,{mode:"code",onChange:function(){var e=a.value.getText();n("update:value",B(e)),n("change",B(e))}}),"object"!==Object(q["a"])(o.value)?a.value.set(B(o.value)):a.value.set(o.value)})),function(e,t){return Object(r["openBlock"])(),Object(r["createElementBlock"])("section",K,null,512)}}};n("78dd");const F=G;var H=F,X=Object(r["createTextVNode"])("创建"),Y=Object(r["createTextVNode"])("全量导入"),Q=Object(r["createTextVNode"])("导出数据 "),W=Object(r["createTextVNode"])("编辑"),Z=Object(r["createTextVNode"])("启用"),ee=Object(r["createTextVNode"])("禁用"),te=Object(r["createTextVNode"])("删除"),ne={class:"p10"},re=Object(r["createTextVNode"])("插件"),oe=Object(r["createTextVNode"])("Swagger"),ce=Object(r["createTextVNode"])("合并"),ae=Object(r["createTextVNode"])("覆盖"),ie=Object(r["createTextVNode"])("上传"),ue={key:0,style:{width:"100%"}},le=Object(r["createTextVNode"])("保存"),se=Object(r["createTextVNode"])("取消"),de={setup:function(e){var t=P(),n=Object(r["getCurrentInstance"])(),u=Object(r["reactive"])({name:"",from:g.Kepler,schema:"",disabled:!0,merge:!1,id:""}),l=Object(r["ref"])([]),s=function(){D(t.apis)},d=function(){l.value.length>1&&l.value.splice(0,1);var e=l.value[0].raw,t=new FileReader;t.readAsText(e,"utf8"),t.onload=function(){try{var e=JSON.parse(this.result);u.schema=e,p.refresh=!p.refresh}catch(t){a["a"].error("文件格式不正确")}C()}},f=Object(r["computed"])((function(){var e=[{required:!0,message:"请输入模块名",trigger:"change"}],t=[{required:!0,message:"请选择来源",trigger:"change"}],n=[{required:!0,message:"请输入数据源",trigger:"change"},{validator:function(e,t,n){return u.from===g.Kepler?n(k(t)):u.from===g.All?n(y(t)):n(N(t))}}];return u.from===g.All?{schema:n}:{name:e,from:t,schema:n}})),b={Edit:"Edit",Create:"Create",All:"All"},p=Object(r["reactive"])({isShow:!1,isEdit:!1,refresh:!1}),O=function(){p.isShow=!1},h=function(){t.changeGlobalMock(!t.openMock)},j=function(e,n){t.edit(Object(c["a"])(Object(c["a"])({},e),{},{disabled:n}))},m=function(){n.refs["$form"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},v=function(e){u.name=e.name,u.id=e.id,u.from=g.Owner,u.merge=!1,u.schema=e.schema,p.isEdit=b.Edit,p.refresh=!p.refresh,p.isShow=!0},w=function(){p.isShow=!0,p.refresh=!p.refresh,p.isEdit=b.All,u.from=g.All,u.name="",u.schema={schema:t.apis},u.merge=!1,u.id="",setTimeout((function(){C()}),0)},x=function(){p.refresh=!p.refresh,p.isEdit=b.Create,u.name="",u.schema={info:{title:"模块名字"},paths:[{desc:"插件示例模板，自行修改",uri:"/api/example",id:U(),methods:"get",disabled:!0,finish:!1,code:200,response:{}}]},u.merge=!1,u.id="",u.from=g.Owner,p.isShow=!0,Object(r["nextTick"])((function(){n.refs["$form"].resetFields()}))},V=function(e){i["a"].confirm("是否删除【".concat(e.name,"】"),"删除模块",{confirmButtonText:"OK",cancelButtonText:"Cancel",type:"warning"}).then((function(){t.remove(e.id),Object(a["a"])({type:"success",message:"删除成功"})})).catch((function(){}))},C=function(e){n.refs["$form"].validateField("schema")},_=function(){n.refs["$form"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n,r){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n){e.next=2;break}return e.abrupt("return");case 2:if(p.isEdit!==b.Edit){e.next=6;break}return t.edit(Object(c["a"])(Object(c["a"])({},u),{},{schema:u.from===g.Owner?u.schema:E(u.schema)})),p.isShow=!1,e.abrupt("return");case 6:if(p.isEdit!==b.All){e.next=10;break}return t.editAll(u.schema.schema),p.isShow=!1,e.abrupt("return");case 10:t.add({name:u.name,schema:u.from===g.Owner?u.schema:E(u.schema)}),p.isShow=!1;case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())};return function(e,n){var o=Object(r["resolveComponent"])("el-button"),c=Object(r["resolveComponent"])("el-col"),a=Object(r["resolveComponent"])("el-table-column"),i=Object(r["resolveComponent"])("el-table"),N=Object(r["resolveComponent"])("el-input"),y=Object(r["resolveComponent"])("el-form-item"),k=Object(r["resolveComponent"])("el-radio-button"),E=Object(r["resolveComponent"])("el-radio-group"),T=Object(r["resolveComponent"])("el-upload"),M=Object(r["resolveComponent"])("el-form"),S=Object(r["resolveComponent"])("el-dialog"),I=Object(r["resolveComponent"])("el-row");return Object(r["openBlock"])(),Object(r["createBlock"])(I,{class:"p10"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{span:24,class:"mb10"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:x},{default:Object(r["withCtx"])((function(){return[X]})),_:1}),Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:w},{default:Object(r["withCtx"])((function(){return[Y]})),_:1}),Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:s,disabled:0===Object(r["unref"])(t).apis.length},{default:Object(r["withCtx"])((function(){return[Q]})),_:1},8,["disabled"]),Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:h,disabled:0===Object(r["unref"])(t).apis.length},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(t).openMock?"关闭Mock":"打开Mock"),1)]})),_:1},8,["disabled"])]})),_:1}),Object(r["createVNode"])(c,{span:24},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{data:Object(r["unref"])(t).apis,class:"modules_manger_table"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,{prop:"name",label:"模块名",width:"100"}),Object(r["createVNode"])(a,{prop:"create",label:"创建时间",width:"150"}),Object(r["createVNode"])(a,{prop:"update",label:"更新时间",width:"150"}),Object(r["createVNode"])(a,{label:"启用",prop:"disabled",width:"60"},{default:Object(r["withCtx"])((function(e){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(e.row.disabled?"禁用":"启用"),1)]})),_:1}),Object(r["createVNode"])(a,{label:"操作",width:"280px"},{default:Object(r["withCtx"])((function(e){return[Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:function(t){return v(e.row)}},{default:Object(r["withCtx"])((function(){return[W]})),_:2},1032,["onClick"]),Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:function(t){return j(e.row,!1)}},{default:Object(r["withCtx"])((function(){return[Z]})),_:2},1032,["onClick"]),Object(r["createVNode"])(o,{size:"small",type:"danger",onClick:function(t){return j(e.row,!0)}},{default:Object(r["withCtx"])((function(){return[ee]})),_:2},1032,["onClick"]),Object(r["createVNode"])(o,{size:"small",type:"danger",onClick:function(t){return V(e.row)}},{default:Object(r["withCtx"])((function(){return[te]})),_:2},1032,["onClick"])]})),_:1})]})),_:1},8,["data"])]})),_:1}),Object(r["createVNode"])(S,{modelValue:Object(r["unref"])(p).isShow,"onUpdate:modelValue":n[4]||(n[4]=function(e){return Object(r["unref"])(p).isShow=e}),title:Object(r["unref"])(p).isEdit===b.Edit?"编辑":"创建",width:"80%"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("section",ne,[Object(r["createVNode"])(M,{model:Object(r["unref"])(u),"label-width":"80px","label-position":"left",rules:Object(r["unref"])(f),ref:"$form"},{default:Object(r["withCtx"])((function(){return[Object(r["unref"])(p).isEdit!==b.All?(Object(r["openBlock"])(),Object(r["createBlock"])(y,{key:0,label:"模块名",prop:"name"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:Object(r["unref"])(u).name,"onUpdate:modelValue":n[0]||(n[0]=function(e){return Object(r["unref"])(u).name=e})},null,8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["unref"])(p).isEdit!==b.All?(Object(r["openBlock"])(),Object(r["createBlock"])(y,{key:1,label:"来源",prop:"from"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{modelValue:Object(r["unref"])(u).from,"onUpdate:modelValue":n[1]||(n[1]=function(e){return Object(r["unref"])(u).from=e}),size:"small",onChange:C},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(k,{label:Object(r["unref"])(g).Owner},{default:Object(r["withCtx"])((function(){return[re]})),_:1},8,["label"]),Object(r["createVNode"])(k,{label:Object(r["unref"])(g).Kepler},{default:Object(r["withCtx"])((function(){return[oe]})),_:1},8,["label"])]})),_:1},8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["unref"])(p).isEdit===b.Edit?(Object(r["openBlock"])(),Object(r["createBlock"])(y,{key:2,label:"合并",prop:"merge"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(E,{modelValue:Object(r["unref"])(u).merge,"onUpdate:modelValue":n[2]||(n[2]=function(e){return Object(r["unref"])(u).merge=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(k,{label:!0},{default:Object(r["withCtx"])((function(){return[ce]})),_:1}),Object(r["createVNode"])(k,{label:!1},{default:Object(r["withCtx"])((function(){return[ae]})),_:1})]})),_:1},8,["modelValue"])]})),_:1})):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(y,{label:"上传"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(T,{ref:"uploadRef","auto-upload":!1,"on-change":d,"file-list":l.value,"show-file-list":!1},{trigger:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{size:"small",type:"primary"},{default:Object(r["withCtx"])((function(){return[ie]})),_:1})]})),_:1},8,["file-list"]),Object(r["unref"])(p).isEdit===b.All?(Object(r["openBlock"])(),Object(r["createElementBlock"])("p",ue," 只支持插件定制格式导入 ")):Object(r["createCommentVNode"])("",!0)]})),_:1}),Object(r["createVNode"])(y,{label:"数据源",prop:"schema"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(H,{refresh:Object(r["unref"])(p).refresh,value:Object(r["unref"])(u).schema,"onUpdate:value":n[3]||(n[3]=function(e){return Object(r["unref"])(u).schema=e}),onChange:m},null,8,["refresh","value"])]})),_:1}),Object(r["createVNode"])(y,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{size:"small",type:"primary",onClick:_},{default:Object(r["withCtx"])((function(){return[le]})),_:1}),Object(r["createVNode"])(o,{size:"small",onClick:O},{default:Object(r["withCtx"])((function(){return[se]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["modelValue","title"])]})),_:1})}}};n("98619");const fe=de;var be=fe,pe=(n("4de4"),function(){var e=[{required:!0,message:"请输入URI",trigger:"change"}],t=[{required:!0,message:"请选择请求方法",trigger:"change"}],n=[{required:!0,message:"请选择模块",trigger:"change"}],r=[{message:"请选择请求方法",trigger:"change",validator:function(e,t,n){try{parseInt(t),n()}catch(r){return void n(new Error("请输入JSON格式"))}}}];return{uri:e,methods:t,response:r,moduleIdx:n}}),Oe=function(){var e=P(),t=Object(r["getCurrentInstance"])(),n=Object(r["ref"])({isShow:!1}),c=Object(r["ref"])({uri:"",desc:"",methods:"",disabled:!0,finish:!1,response:{}}),a=function(e){e&&(c.value={uri:"",desc:"",methods:"",moduleIdx:"",disabled:!0,finish:!1,response:{}}),n.value.isShow=e},i=function(){t.refs["$formCreate"].validate(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(r,o){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r){t.next=2;break}return t.abrupt("return");case 2:e.addNewNode(c.value),n.value.isShow=!1;case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())},u=pe(),l=u.uri,s=u.response,d=u.methods,f=u.moduleIdx,b={uri:l,response:s,methods:d,moduleIdx:f};return{rules:b,dialogInfo:n,formValue:c,handlIsOpen:a,handleSave:i}},he={class:"edit-api"},je={class:"edit-api__left"},me=Object(r["createTextVNode"])("添加"),ve={key:0,class:"edit-api__right pl15"},we=Object(r["createTextVNode"])("关闭"),xe=Object(r["createTextVNode"])("启动"),Ve=Object(r["createTextVNode"])("完成"),ge=Object(r["createTextVNode"])("未完成"),Ce=Object(r["createTextVNode"])("保存"),Ne=Object(r["createTextVNode"])("删除"),ye={class:"p10"},ke=Object(r["createTextVNode"])("启动"),_e=Object(r["createTextVNode"])("关闭"),Ee=Object(r["createTextVNode"])("完成"),Te=Object(r["createTextVNode"])("未完成"),Me=Object(r["createTextVNode"])("保存"),Se=Object(r["createTextVNode"])("取消"),Ie={setup:function(e){var t=Object(r["getCurrentInstance"])(),n=Oe(),a=n.dialogInfo,i=n.handlIsOpen,u=n.formValue,l=n.rules,s=n.handleSave,d=P(),f={children:"children",label:"label"},b=Object(r["ref"])(!1),p=Object(r["reactive"])({expandKey:[],checkKey:[]}),O=Object(r["ref"])(""),h=Object(r["ref"])({id:"",uri:"",desc:"",method:"",response:{},finish:!1,disabled:!1}),j=Object(r["computed"])((function(){var e=d.apis.map(_);return O.value?e.map((function(e){var t=e.children.filter((function(e){return e.label.indexOf(O.value)>-1}));return Object(c["a"])(Object(c["a"])({},e),{},{children:t})})):e})),m=function(e){if(e.detail){var t=e.detail,n=t.apisIdx,r=t.id,o=t.uri,c=t.desc,a=t.methods,i=t.response,u=t.finish,l=t.disabled,s=d.apis[n].name;p.expandKey=[s,e.label],h.value={apisIdx:n,id:r,uri:o,desc:c,methods:a,response:i,finish:u,disabled:l},b.value=!b.value}},v=(Object(r["reactive"])({}),Object(r["computed"])((function(){var e=pe(),t=e.uri,n=e.response,r=e.methods;e.moduleIdx;return{uri:t,response:n,methods:r}}))),w=function(){t.refs["$form"].validate(function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:d.editItem(Object(c["a"])({},h.value));case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())},x=function(){var e=h.value,t=e.apisIdx,n=e.id;d.removeItem(t,n),h.value.id=""},V=function(e,t){var n=t.node,r=t.data;t.store;if(!r.detail)return e("h",{class:"fz12 "},n.label);var o=r.detail,c=o.disabled,a=o.finish;return e("h",{class:"fz12 ".concat(c?"danger-icon":"success-icon"),title:n.label},[e("span",{class:a?"info-color":"normal-color"},n.label)])};return function(e,t){var n=Object(r["resolveComponent"])("el-button"),o=Object(r["resolveComponent"])("el-input"),c=Object(r["resolveComponent"])("el-tree"),g=Object(r["resolveComponent"])("el-form-item"),C=Object(r["resolveComponent"])("el-radio-button"),N=Object(r["resolveComponent"])("el-radio-group"),y=Object(r["resolveComponent"])("el-form"),k=Object(r["resolveComponent"])("el-option"),_=Object(r["resolveComponent"])("el-select"),E=Object(r["resolveComponent"])("el-dialog");return Object(r["openBlock"])(),Object(r["createElementBlock"])("section",he,[Object(r["createElementVNode"])("section",je,[Object(r["createVNode"])(n,{size:"small",type:"primary",class:"mb20",onClick:t[0]||(t[0]=function(e){return Object(r["unref"])(i)(!0)})},{default:Object(r["withCtx"])((function(){return[me]})),_:1}),Object(r["createVNode"])(o,{modelValue:O.value,"onUpdate:modelValue":t[1]||(t[1]=function(e){return O.value=e}),placeholder:"请输入过滤名字"},null,8,["modelValue"]),Object(r["createVNode"])(c,{data:Object(r["unref"])(j),props:f,onNodeClick:m,"render-content":V,"default-expanded-keys":Object(r["unref"])(p).expandKey,"node-key":"label"},null,8,["data","default-expanded-keys"])]),h.value.id?(Object(r["openBlock"])(),Object(r["createElementBlock"])("section",ve,[Object(r["createVNode"])(y,{model:h.value,"label-width":"80px","label-position":"left",rules:Object(r["unref"])(v),ref:"$form"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{label:"名字",prop:"desc"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{modelValue:h.value.desc,"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.value.desc=e})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"URI",prop:"uri"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{modelValue:h.value.uri,"onUpdate:modelValue":t[3]||(t[3]=function(e){return h.value.uri=e})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"方法",prop:"methods"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:h.value.methods,"onUpdate:modelValue":t[4]||(t[4]=function(e){return h.value.methods=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{label:"get"}),Object(r["createVNode"])(C,{label:"post"}),Object(r["createVNode"])(C,{label:"put"}),Object(r["createVNode"])(C,{label:"delete"})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"启用",prop:"disabled"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:h.value.disabled,"onUpdate:modelValue":t[5]||(t[5]=function(e){return h.value.disabled=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{label:!0},{default:Object(r["withCtx"])((function(){return[we]})),_:1}),Object(r["createVNode"])(C,{label:!1},{default:Object(r["withCtx"])((function(){return[xe]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"完成",prop:"finish"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:h.value.finish,"onUpdate:modelValue":t[6]||(t[6]=function(e){return h.value.finish=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{label:!0},{default:Object(r["withCtx"])((function(){return[Ve]})),_:1}),Object(r["createVNode"])(C,{label:!1},{default:Object(r["withCtx"])((function(){return[ge]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"返回",prop:"response"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(H,{value:h.value.response,"onUpdate:value":t[7]||(t[7]=function(e){return h.value.response=e}),refresh:b.value},null,8,["value","refresh"])]})),_:1}),Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{size:"small",type:"primary",onClick:w},{default:Object(r["withCtx"])((function(){return[Ce]})),_:1}),Object(r["createVNode"])(n,{size:"small",type:"danger",onClick:x},{default:Object(r["withCtx"])((function(){return[Ne]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])):Object(r["createCommentVNode"])("",!0),Object(r["createVNode"])(E,{modelValue:Object(r["unref"])(a).isShow,"onUpdate:modelValue":t[16]||(t[16]=function(e){return Object(r["unref"])(a).isShow=e}),title:"创建",width:"80%"},{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("section",ye,[Object(r["createVNode"])(y,{model:Object(r["unref"])(u),"label-width":"80px","label-position":"left",rules:Object(r["unref"])(l),ref:"$formCreate"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(g,{label:"名字",prop:"desc"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{modelValue:Object(r["unref"])(u).desc,"onUpdate:modelValue":t[8]||(t[8]=function(e){return Object(r["unref"])(u).desc=e})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"URI",prop:"uri"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(o,{modelValue:Object(r["unref"])(u).uri,"onUpdate:modelValue":t[9]||(t[9]=function(e){return Object(r["unref"])(u).uri=e})},null,8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"模块",prop:"moduleIdx"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(_,{modelValue:Object(r["unref"])(u).moduleIdx,"onUpdate:modelValue":t[10]||(t[10]=function(e){return Object(r["unref"])(u).moduleIdx=e}),placeholder:"请选择模块"},{default:Object(r["withCtx"])((function(){return[(Object(r["openBlock"])(!0),Object(r["createElementBlock"])(r["Fragment"],null,Object(r["renderList"])(Object(r["unref"])(d).apis,(function(e,t){return Object(r["openBlock"])(),Object(r["createBlock"])(k,{key:t,value:t,label:e.name},null,8,["value","label"])})),128))]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"方法",prop:"methods"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:Object(r["unref"])(u).methods,"onUpdate:modelValue":t[11]||(t[11]=function(e){return Object(r["unref"])(u).methods=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{label:"get"}),Object(r["createVNode"])(C,{label:"post"}),Object(r["createVNode"])(C,{label:"put"}),Object(r["createVNode"])(C,{label:"delete"})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"启用",prop:"disabled"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:Object(r["unref"])(u).disabled,"onUpdate:modelValue":t[12]||(t[12]=function(e){return Object(r["unref"])(u).disabled=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{label:!0},{default:Object(r["withCtx"])((function(){return[ke]})),_:1}),Object(r["createVNode"])(C,{label:!1},{default:Object(r["withCtx"])((function(){return[_e]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"完成",prop:"finish"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(N,{modelValue:Object(r["unref"])(u).finish,"onUpdate:modelValue":t[13]||(t[13]=function(e){return Object(r["unref"])(u).finish=e}),size:"small"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(C,{label:!0},{default:Object(r["withCtx"])((function(){return[Ee]})),_:1}),Object(r["createVNode"])(C,{label:!1},{default:Object(r["withCtx"])((function(){return[Te]})),_:1})]})),_:1},8,["modelValue"])]})),_:1}),Object(r["createVNode"])(g,{label:"返回",prop:"response"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(H,{value:Object(r["unref"])(u).response,"onUpdate:value":t[14]||(t[14]=function(e){return Object(r["unref"])(u).response=e}),refresh:b.value},null,8,["value","refresh"])]})),_:1}),Object(r["createVNode"])(g,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(n,{size:"small",type:"primary",onClick:Object(r["unref"])(s)},{default:Object(r["withCtx"])((function(){return[Me]})),_:1},8,["onClick"]),Object(r["createVNode"])(n,{size:"small",onClick:t[15]||(t[15]=function(e){return Object(r["unref"])(i)(!1)})},{default:Object(r["withCtx"])((function(){return[Se]})),_:1})]})),_:1})]})),_:1},8,["model","rules"])])]})),_:1},8,["modelValue"])])}}};n("dea1");const Be=Ie;var Re=Be,Ue=n("bc3a"),Le=n.n(Ue),ze=n("d4ec"),Ae=n("bee2"),Pe=window.XMLHttpRequest,qe=window.fetch.bind(window),De=function(){var e=["apis","openMock"],t={};return e.forEach((function(e){t[e]=p(window.sessionStorage.getItem("".concat(b).concat(e)))})),t},Je=function(e,t){if(e&&t){var n=De(),r=n.apis;if(r){var o=!1,c=void 0;return r.forEach((function(n){if(!0!==n.disabled&&!0!==o){var r=n.schema,a=r.paths,i=a.find((function(n){var r=n.methods,o=n.uri,c=n.disabled;return!c&&(e.indexOf(o)>-1&&String(t).toLocaleLowerCase()===r)}));i&&(o=!0,c=i.response)}})),c}console.warn("apis找不到")}},$e=function(){function e(){var t=this;Object(ze["a"])(this,e),this._method="";var n=new Pe;n._open=n.open;var r=this,o=function(e){return"onreadystatechange"===e?(n.onreadystatechange=function(){4==t.readyState&&t.modifilyResponse();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.onreadystatechange&&t.onreadystatechange.apply(t,n)},"continue"):("open"===e&&(n.open=function(){0===arguments.length||(r._method=arguments.length<=0?void 0:arguments[0],n._open.apply(n,arguments))}),"onload"===e?(n.onload=function(){t.modifilyResponse();for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.onload&&t.onload.apply(t,n)},"continue"):"function"===typeof n[e]?(t[e]=n[e].bind(n),"continue"):["responseText","response"].includes(e)?(Object.defineProperty(t,e,{get:function(){var r=void 0==t["_".concat(e)]?n[e]:t["_".concat(e)];return r},set:function(n){return t["_".concat(e)]=n},enumerable:!0}),"continue"):void Object.defineProperty(t,e,{get:function(){return n[e]},set:function(t){return n[e]=t},enumerable:!0}))};for(var c in n)o(c)}return Object(Ae["a"])(e,[{key:"modifilyResponse",value:function(){var e=Je(this.responseURL,this._method);e&&(this.responseText=e,this.response=e)}}]),e}(),Ke=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(0===t.length)return Promise.reject();var r,o;1===t.length&&(r=t[0]),2===t.length&&(r=t[0],o="object"===Object(q["a"])(t[1])&&t[1].method);var c=Je(r,o),a=" object"===typeof c?JSON.stringify(c):c;return qe.apply(void 0,t).then((function(e){if(!c)return e;var t=new ReadableStream({start:function(e){e.enqueue((new TextEncoder).encode(JSON.stringify(a))),e.close()}}),n=new Response(t,{headers:e.headers,status:e.status,statusText:e.statusText}),r=new Proxy(n,{get:function(t,n){switch(n){case"ok":case"redirected":case"type":case"url":case"useFinalURL":case"body":case"bodyUsed":return e[n]}return t[n]}});for(var o in r)"function"===typeof r[o]&&(r[o]=r[o].bind(n));return r}))};Ke(),new $e;var Ge=function(e){if(e)return console.log("开启"),window.XMLHttpRequest=$e,void(window.fetch=Ke);console.log("禁用"),window.XMLHttpRequest=Pe,window.fetch=qe},Fe=function(e){var t=De(),n=(t.apis,t.openMock);Ge(n)};window.addEventListener(d.toPage,Fe);var He=Object(r["createTextVNode"])("Axios Get请求"),Xe=Object(r["createTextVNode"])("Fetch Get请求"),Ye=Object(r["createTextVNode"])("XMLHttpRequest Get请求"),Qe={setup:function(e){var t=P(),n=(Object(r["ref"])(!1),window.XMLHttpRequest,function(){t.changeGlobalMock(!t.openMock),Fe()}),o="https://restapi.amap.com/v3/place/text",c="key=d575ee75cfb2dee118eac9d49927a9b3&keywords=金山软件园",a={key:"d575ee75cfb2dee118eac9d49927a9b3",keywords:"金山软件园"},i=function(){Le.a.get(o,{params:a}).then((function(e){console.log(e)}))},u=function(){fetch("".concat(o,"?").concat(c),{method:"get"}).then((function(e){return console.log("fetch res",e),e.text()})).then((function(e){console.log(e)}))},l=function(){var e=new XMLHttpRequest;e.open("get","".concat(o,"?").concat(c),!0),e.send(),e.onreadystatechange=function(){e.readyState===XMLHttpRequest.DONE&&200===e.status&&console.log(JSON.parse(e.responseText))}};return function(e,o){var c=Object(r["resolveComponent"])("el-button");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(c,{onClick:i},{default:Object(r["withCtx"])((function(){return[He]})),_:1}),Object(r["createVNode"])(c,{onClick:u},{default:Object(r["withCtx"])((function(){return[Xe]})),_:1}),Object(r["createVNode"])(c,{onClick:l},{default:Object(r["withCtx"])((function(){return[Ye]})),_:1}),Object(r["createVNode"])(c,{onClick:n,type:"primary"},{default:Object(r["withCtx"])((function(){return[Object(r["createTextVNode"])(Object(r["toDisplayString"])(Object(r["unref"])(t).openMock?"关闭Mock":"开启Mock"),1)]})),_:1})],64)}}};const We=Qe;var Ze=We,et={setup:function(e){var t=!0,n=P();n.init();var o=Object(r["ref"])("module");return function(e,n){var c=Object(r["resolveComponent"])("el-tab-pane"),a=Object(r["resolveComponent"])("el-tabs"),i=Object(r["resolveComponent"])("el-col"),u=Object(r["resolveComponent"])("el-row");return Object(r["openBlock"])(),Object(r["createBlock"])(u,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(i,{span:24},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(a,{modelValue:o.value,"onUpdate:modelValue":n[0]||(n[0]=function(e){return o.value=e})},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(c,{label:"模块管理",name:"module"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(be)]})),_:1}),Object(r["createVNode"])(c,{label:"请求管理",name:"api"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(Re)]})),_:1}),t?Object(r["createCommentVNode"])("",!0):(Object(r["openBlock"])(),Object(r["createBlock"])(c,{key:0,label:"模拟请求",name:"mock"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(Ze)]})),_:1}))]})),_:1},8,["modelValue"])]})),_:1})]})),_:1})}}};const tt=et;var nt=tt,rt=n("4d5f"),ot=(n("7437"),n("6014"),n("b339"),Object(r["createApp"])(nt));ot.use(Object(l["a"])()),ot.use(rt["a"]),ot.mount("#app"),v((function(e,t,n){console.log("panel addListener",e)}))},"78dd":function(e,t,n){"use strict";n("a08c")},98619:function(e,t,n){"use strict";n("1ea2")},a08c:function(e,t,n){},b339:function(e,t,n){},bdee:function(e,t,n){},dea1:function(e,t,n){"use strict";n("bdee")}});
//# sourceMappingURL=app.ee5c1f4f.js.map